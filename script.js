/*! (c) 2016 mobileCreature - GJSmith3rd - Gilbert Joseph Smith III (MIT) */
$(document).ready(function(){function e(){$(".minutes").text(("0"+d).slice(-2)),$(".seconds").text("00".slice(-2)),$("#sessText").text("Start Session"),document.title="Pomodoro Timer"}function s(){$(".minutes").text(("0"+d).slice(-2)),$(".seconds").text("00".slice(-2))}function a(e,s,a){$(".minutes").text(("0"+e).slice(-2)),$(".seconds").text(("0"+s).slice(-2)),$("#sessText").text(a)}function n(e,s,a){document.title=a+" "+("0"+e).slice(-2)+":"+("0"+s).slice(-2)}function l(){for(var e=1;999>e;e++)window.clearInterval(e);for(var s=1;999>s;s++)window.clearTimeout(s)}function i(){l(),e(),$.ionSound.play(y),k=!1;for(var i=0,u=0;r>u;u++)setTimeout(function(l){return function(){function u(t,c){var u=o(t),p=o(c);switch(!0){case u.total<=0&&l===r-1:clearInterval(m),e(),$.ionSound.play(g);break;case u.total<=0&&k:a(p.mins,p.secs,"Break: "+i),n(p.mins,p.secs,"Break"),$.ionSound.play(y),k=!1;break;case u.total<=0&&p.total>1:a(p.mins,p.secs,"Break: "+i),n(p.mins,p.secs,"Break"),$.ionSound.play(w);break;case u.total>0:a(u.mins,u.secs,"Session: "+i),n(u.mins,u.secs,"Session"),$.ionSound.play(w),k=!0;break;case u.total<=0:clearInterval(m),a("00","00"+d,"Session: "+i),n("00","00","Session"),$.ionSound.play(y),s()}}i+=1;var m=setInterval(u,1e3,t(d).timeMins,t(d+c).timeMins)}}(u),(d+c)*u*1e3*60)}function t(e){var s=1e3*e,a=60*e*1e3,n=new Date(Date.now()+s),l=new Date(Date.now()+a);return{timeDate:new Date(Date.now()),timeSecs:n,timeMins:l}}function o(e){var s=Date.parse(e)-Date.parse(new Date),a=Math.floor(s/1e3%60),n=Math.floor(s/1e3/60%60),l=Math.floor(s/36e5%24),i=Math.floor(s/864e5);return{total:s,days:i,hours:l,mins:n,secs:a}}var d=25,c=5,r=4,u=10,m=20,p=25,h=50,b=3,f=4,v=5,C=10,k=!1,w="snap",y="start",g="finish";e(),function(){$(".panel").find(".panel-body").slideUp(),$(".panel").children(".clickable").addBack().addClass("panel-collapsed"),$(".panel").children(".clickable").addBack().find("i").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down")}(),$("#timer-startReset").click(function(){$("#timer-minus").removeClass("disabled"),$("#timer-minus").addClass("enabled"),$("#timer-plus").removeClass("disabled"),$("#timer-plus").addClass("enabled"),i()}),$("#timer-minus").click(function(){switch(!0){case 2>d:$(this).removeClass("enabled"),$(this).addClass("disabled"),$("#timer-plus").removeClass("disabled"),$("#timer-plus").addClass("enabled");break;default:$("#timer-plus").hasClass("disabled")===!0&&($("#timer-plus").removeClass("disabled"),$("#timer-plus").addClass("enabled")),l(),d-=1,e()}}),$("#timer-plus").click(function(){switch(!0){case d>49:$(this).removeClass("enabled"),$(this).addClass("disabled"),$("#timer-minus").removeClass("disabled"),$("#timer-minus").addClass("enabled");break;default:$("#timer-minus").hasClass("disabled")===!0&&($("#timer-minus").removeClass("disabled"),$("#timer-minus").addClass("enabled")),l(),d+=1,e()}}),$(".short, .medium, .standard, .long").click(function(s){var a=$(this);switch(!0){case a.hasClass("short"):d=u,c=b;break;case a.hasClass("medium"):d=m,c=f;break;case a.hasClass("standard"):d=p,c=v;break;case a.hasClass("long"):d=h,c=C}l(),e()}),$(".main-panel").click(function(e){function s(){n.parents(".panel").find(".panel-body").slideUp(),n.siblings(".clickable").addBack().addClass("panel-collapsed"),n.siblings(".clickable").addBack().find("i").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down")}function a(){n.parents(".panel").find(".panel-body").slideDown(),n.siblings(".clickable").addBack().removeClass("panel-collapsed"),n.siblings(".clickable").addBack().find("i").removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up")}var n=$(this);switch(!0){case!n.hasClass("panel-collapsed"):s();break;default:a()}}),$("#sound-off").click(function(){w="null",y="null",g="null",$(this).blur(),$(this).removeClass("active")}),$("#sound-on").click(function(){w="snap",y="start",g="finish",$(this).blur(),$(this).removeClass("active")});var S="http://mobilecreature-cdn.appspot.com/pomodoro/media/sounds/";$.ionSound({sounds:[{name:"",alias:"null"},{name:"bell_ring",alias:"start"},{name:"bell_ring",loop:3,alias:"finish"},{name:"snap"}],volume:.1,multiplay:!0,path:S,preload:!0})});